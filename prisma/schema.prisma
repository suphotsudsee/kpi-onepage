generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
}

model Project {
  id            String   @id @default(cuid())
  code          String?  @unique
  name          String
  ownerName     String
  department    String
  fiscalYear    Int
  startDate     DateTime
  endDate       DateTime
  status        ProjectStatus @default(ON_TRACK)
  progress      Int      @default(0) // 0-100
  budget        Float    @default(0)

  objective     String?  // One Page
  targetGroup   String?
  outcomes      String?
  risks         String?
  mitigation    String?
  timelineNote  String?

  kpis          KPI[]
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model KPI {
  id          String @id @default(cuid())
  projectId   String
  project     Project @relation(fields: [projectId], references: [id], onDelete: Cascade)

  name        String
  unit        String?
  target      Float
  actual      Float  @default(0)
  weight      Float  @default(1)

  updatedAt   DateTime @updatedAt
  createdAt   DateTime @default(now())
}

enum ProjectStatus {
  ON_TRACK
  AT_RISK
  DELAYED
  DONE
}
